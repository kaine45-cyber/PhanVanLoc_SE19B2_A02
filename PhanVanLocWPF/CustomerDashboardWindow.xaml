<Window x:Class="PhanVanLocWPF.CustomerDashboardWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        Title="Customer Dashboard - FUMiniHotelSystem"
        Height="600" Width="1000"
        WindowStartupLocation="CenterScreen"
        Background="White">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2196F3" Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <materialDesign:PackIcon Kind="Account" Width="32" Height="32" Foreground="White"/>
                    <TextBlock x:Name="txtWelcome" Text="Welcome, Customer!" 
                               FontSize="20" 
                               FontWeight="Bold" 
                               Foreground="White"
                               Margin="10,0,0,0" 
                               VerticalAlignment="Center"/>
                </StackPanel>
                
                <Button Grid.Column="1" 
                       Content="Logout" 
                       Background="#FF5722" 
                       Foreground="White" 
                       Padding="15,5" 
                       Click="LogoutButton_Click"/>
            </Grid>
        </Border>

        <!-- Main Content -->
        <TabControl Grid.Row="1" Margin="20">
            <!-- Profile Tab -->
            <TabItem Header="My Profile">
                <Border Background="White" Margin="20" CornerRadius="5" Padding="20">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
                            <Button Content="Edit Profile" 
                                    Background="#4CAF50" 
                                    Foreground="White" 
                                    Padding="15,5" 
                                    Click="EditProfileButton_Click"/>
                        </StackPanel>

                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Full Name:" FontWeight="Bold" Margin="0,0,10,10"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" x:Name="txtProfileFullName" Margin="0,0,0,10"/>

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Email:" FontWeight="Bold" Margin="0,0,10,10"/>
                            <TextBlock Grid.Row="1" Grid.Column="1" x:Name="txtProfileEmail" Margin="0,0,0,10"/>

                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Phone:" FontWeight="Bold" Margin="0,0,10,10"/>
                            <TextBlock Grid.Row="2" Grid.Column="1" x:Name="txtProfilePhone" Margin="0,0,0,10"/>

                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Birthday:" FontWeight="Bold" Margin="0,0,10,10"/>
                            <TextBlock Grid.Row="3" Grid.Column="1" x:Name="txtProfileBirthday" Margin="0,0,0,10"/>

                            <TextBlock Grid.Row="4" Grid.Column="0" Text="Status:" FontWeight="Bold" Margin="0,0,10,10"/>
                            <TextBlock Grid.Row="4" Grid.Column="1" x:Name="txtProfileStatus" Margin="0,0,0,10"/>
                        </Grid>
                    </Grid>
                </Border>
            </TabItem>

            <!-- Booking History Tab -->
            <TabItem Header="Booking History">
                <Border Background="White" Margin="20" CornerRadius="5" Padding="20">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
                            <Button Content="New Booking" 
                                    Background="#4CAF50" 
                                    Foreground="White" 
                                    Padding="15,5" 
                                    Margin="0,0,10,0"
                                    Click="NewBookingButton_Click"/>
                            <Button Content="Refresh" 
                                    Background="#2196F3" 
                                    Foreground="White" 
                                    Padding="15,5" 
                                    Click="RefreshBookingsButton_Click"/>
                        </StackPanel>

                        <DataGrid x:Name="dgBookings" Grid.Row="1"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  IsReadOnly="True"
                                  SelectionMode="Single"
                                  RowHeaderWidth="0"
                                  GridLinesVisibility="Horizontal"
                                  HeadersVisibility="Column"
                                  AlternatingRowBackground="#F5F5F5">
                            <DataGrid.ColumnHeaderStyle>
                                <Style TargetType="DataGridColumnHeader">
                                    <Setter Property="Background" Value="#E3F2FD"/>
                                    <Setter Property="Foreground" Value="Black"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                    <Setter Property="Padding" Value="8"/>
                                </Style>
                            </DataGrid.ColumnHeaderStyle>
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Booking ID" Binding="{Binding BookingReservationID}" Width="100"/>
                                <DataGridTextColumn Header="Booking Date" Binding="{Binding BookingDate, StringFormat=d}" Width="120"/>
                                <DataGridTextColumn Header="Total Price" Binding="{Binding TotalPrice, StringFormat=C0}" Width="120"/>
                                <DataGridTextColumn Header="Status" Binding="{Binding BookingStatus}" Width="100"/>
                                <DataGridTemplateColumn Header="Actions" Width="120">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button Content="View Details" 
                                                    Background="#2196F3" 
                                                    Foreground="White"
                                                    Padding="8,4"
                                                    Click="ViewBookingDetails_Click"
                                                    Tag="{Binding}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>
                </Border>
            </TabItem>
        </TabControl>

        <!-- Footer -->
        <Border Grid.Row="2" Background="#F0F0F0" Padding="10">
            <TextBlock Text="Â© 2024 FUMiniHotelSystem - Customer Portal" 
                      FontSize="12" 
                      HorizontalAlignment="Center" 
                      Foreground="Black"/>
        </Border>
    </Grid>
</Window>

